# plugin 和 loader 有什么区别和联系

loader：

由于 webpack 本身只能打包 commonjs 规范的 js 文件，所以针对 css，图片等格式的文件没法打包，就需要引入第三方的模块进行打包。 loader 扩展了 webpack，只专注于转化文件这一个领域，完成压缩 / 打包 / 语言翻译等，仅仅只是为了打包。

plugin：

plugin 也是为了扩展 webpack 的功能，plugin 是作用于 webpack 本身的；从打包优化到压缩，到重新定义环境变量，针对 html 文件打包和拷贝（还有很多设置）的插件：html-webpack-plugin

区别：

1. loader 运行在打包文件之前（loader 为在模块加载时的预处理文件）
2. plugins 在整个编译周期都起作用。

## tree shaking 底层是如何实现的

Webpack 的 Tree Shaking 是通过静态代码分析和依赖图来实现的。在 JavaScript 模块化编程中，模块之间的依赖关系可以表示为一个有向图，其中节点是模块，边是依赖关系。Webpack 通过分析这个依赖图，确定哪些代码实际上被引用，从而可以进行 Tree Shaking。

下面是 Webpack Tree Shaking 的基本实现原理：

1. 静态分析：Webpack 会分析代码，并建立模块之间的依赖关系图。它会追踪模块导出的成员以及模块之间的引用关系，形成一个静态的依赖图。
2. 标记未使用代码：Webpack 在分析代码时，会标记那些被引用但未被使用的代码。这些未被使用的代码被认为是可剔除的。
3. 消除未使用代码：在标记完未使用的代码后，Webpack 会通过构建工具进行优化，从最终的打包文件中移除这些未使用的代码。这样，最终生成的代码包将只包含被实际使用到的代码。
4. ES6 模块静态特性：Tree Shaking 主要依赖于 ES6 模块的静态特性。ES6 模块是静态的，意味着它们的导入和导出在编译时就已经确定，不会受到运行时条件的影响。这使得 Webpack 能够在构建过程中静态地分析模块之间的依赖关系，并识别出哪些代码被使用，哪些代码没有被使用。

总的来说，Webpack 的 Tree Shaking 是通过静态分析代码和依赖图，识别和移除未被使用的代码来实现的。这种优化技术可以帮助减小打包后的文件大小，提高应用程序的性能。
