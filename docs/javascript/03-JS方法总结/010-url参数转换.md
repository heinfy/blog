# url 参数转换

## url 的参数变成对象

```javascript
/**
 * 将 get 链接上的参数变成对象
 * @param {string} str - ?classcode=139
 * @return {object} {classcode: '139'}
 */
export const queryString2Object = str => {
  const obj = {};
  const arr1 = str.split('?');
  const arr2 = arr1[1].split('&');
  for (const i = 0; i < arr2.length; i++) {
    const res = arr2[i].split('=');
    obj[res[0]] = res[1];
  }
  return obj;
};
```

## 对象转换为 URL 查询参数

```javascript
/**
 * 对象转换为URL查询参数
 * @param {object} obj - {classcode: '139', name: '美术'}
 * @return {string} classcode=139&name=美术
 */
export const object2QueryString = obj => {
  const ret = [];
  for (const key in obj) {
    key = encodeURIComponent(key);
    const values = obj[key];
    if (values && values.constructor == Array) {
      //数组
      const queryValues = [];
      for (let i = 0, len = values.length, value; i < len; i++) {
        value = values[i];
        queryValues.push(toQueryPair(key, value));
      }
      ret = ret.concat(queryValues);
    } else {
      ret.push(toQueryPair(key, values));
    }
  }
  return ret.join('&');
};

const toQueryPair = (key, value) => {
  if (typeof value == 'undefined') return key;
  return key + '=' + encodeURIComponent(value === null ? '' : String(value));
};
```
